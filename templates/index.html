<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Plausibility</title>
    <link href= "{{url_for('static',filename = 'CSS/style.css')}}" rel = "stylesheet" />

    <script>
        function changeHide(checkbox, element) {
            element.hidden = checkbox.checked ^ true;
            if (element.hidden == true)
            {
                for (child of element.children){
                    child.value = "";
                }   
            }
        }
            
        // Needs to go *after* events are defined
        function resetChecks() {
            // Should start as false, then call the event that hides the box and flips us to true
            for (var checkbox of document.querySelectorAll("input[type='checkbox']")) {
                checkbox.checked = false;
                checkbox.dispatchEvent(new Event('change'));
            };

        }
        
        function numbers2d(string){
            return string.match(/\d*\.?\d{0,2}/)[0];
        }
        function format2d(string){
            // Early return for an empty string
            if (!string){return ""}

            // If we were originally representing an integer, add the decimal place
            if(!string.includes("."))
            {
                string = string + "."
            }

            // If we were originally representing a decimal, add the 0 placeholder
            if (string[0] === ".")
            {
                string = '0'+ string
            }
            
            // Add 2 0s at the end of our number.  If they are unnecessary, they'll be stripped out by numbers2d()
            string = string + '00'
            return(numbers2d(string))
        }

        function numbers1d(string){
            return string.match(/\d*\.?\d{0,1}/)[0];
        }
        function format1d(string){
            // Early return for an empty string
            if (!string){return ""}

            // If we were originally representing an integer, add the decimal place
            if(!string.includes("."))
            {
                string = string + "."
            }

            // If we were originally representing a decimal, add the 0 placeholder
            if (string[0] === ".")
            {
                string = '0'+ string
            }

            // Add a 0 at the end of our number.  If it is unnecessary, it'll be stripped out by numbers1d()
            string = string + '0'
            return(numbers1d(string))
        }
        
        function checkLen(string, len){
            if (string.length != len){
                return ("");
            }
            return string;
        }

        function onlywholenumbers(string){
            return string.match(/\d*/)[0];
        }

        function checkStateInitial(string){
            states = [ 'AL', 'AK', 'AS', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'DC', 'FM', 'FL', 'GA', 'GU', 'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MH', 'MD', 'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ', 'NM', 'NY', 'NC', 'ND', 'MP', 'OH', 'OK', 'OR', 'PW', 'PA', 'PR', 'RI', 'SC', 'SD', 'TN', 'TX', 'UT', 'VT', 'VI', 'VA', 'WA', 'WV', 'WI', 'WY' ]
            string = string.toUpperCase();
            if (states.includes(string)){
                return string;
            }
            return "";
        }

        function checkGradeStructure(string){
            string = string.toUpperCase().match(/[A-G][1-5]/);
            if (string === null){ return ""; }
            return string[0];
        }

        function FillDefaults(){
            var element;
            document.getElementsByName('funded_amnt')[0].value = '8400.00';
            document.getElementsByName('term')[0].value = '36 Months';
            document.getElementsByName('int_rate')[0].value = '12.85';
            document.getElementsByName('sub_grade')[0].value = 'B4';
            document.getElementsByName('emp_length')[0].value = '6'; // Originally: 6 years

            document.getElementsByName('home_ownership')[0].value = 'MORTGAGE';
            document.getElementsByName('annual_inc')[0].value = '32000.00';
            document.getElementsByName('issue_d')[0].value = '2013-12'; // Oriignally: Dec-13
            document.getElementsByName('purpose')[0].value = 'debt_consolidation';
            document.getElementsByName('zip_code')[0].value = '70000';

            document.getElementsByName('addr_state')[0].value = 'LA';
            document.getElementsByName('dti')[0].value = '28.73';
            document.getElementsByName('delinq_2yrs')[0].value = '0';
            document.getElementsByName('earliest_cr_line')[0].value = '1997-12'; // Originally Dec-97
            document.getElementsByName('inq_last_6mths')[0].value = '1';

            document.getElementsByName('mths_since_last_delinq')[0].value = '44';
            document.getElementsByName('mths_since_last_record')[0].value = '44';
            document.getElementsByName('open_acc')[0].value = '7';
            document.getElementsByName('pub_rec')[0].value = '1';
            document.getElementsByName('last_pymnt_d')[0].value = '2014-03'; // Originally: Mar-14
            
            document.getElementsByName('revol_bal')[0].value = '5655.00';
            document.getElementsByName('revol_util')[0].value = '28.10';
            document.getElementsByName('total_acc')[0].value = '54';
            document.getElementsByName('initial_list_status')[0].value = 'f';
            document.getElementsByName('last_pymnt_amnt')[0].value = '8295.50';
            
            document.getElementsByName('next_pymnt_d')[0].value = '';
            document.getElementsByName('acc_now_delinq')[0].value = '0';
            document.getElementsByName('tot_coll_amnt')[0].value = '0.00';
            document.getElementsByName('tot_cur_bal')[0].value = '33359.00';
            document.getElementsByName('total_rev_hi_lim')[0].value = '20100.00';
            
            document.getElementsByName('last_credit_pull_d')[0].value = '2014-11'; // Originally: Nov-14
            document.getElementsByName('collections_12_mths_ex_med')[0].value = '0';
            document.getElementsByName('mths_since_last_major_derog')[0].value = '44';

            element = document.getElementsByName('has_delinq')[0];
            element.checked = true; // Originally: True
            element.dispatchEvent(new Event('change'));

            element = document.getElementsByName('has_record')[0];
            element.checked = true; // Originally: True
            element.dispatchEvent(new Event('change'));

            element = document.getElementsByName('has_last_pymnt_d')[0];
            element.checked = true; // Originally: True
            element.dispatchEvent(new Event('change'));

            element = document.getElementsByName('has_next_pymnt_d')[0];
            element.checked = false; // Originally: False
            element.dispatchEvent(new Event('change'));

            element = document.getElementsByName('has_derog')[0];
            element.checked = 'true'; // Originally: True
            element.dispatchEvent(new Event('change'));

            document.getElementsByName('verification_status')[0].value = 'Verified';
            document.getElementsByName('total_rec_late_fee')[0].value = '0.00';

            // Calculated amounts:
            //document.getElementsByName('installment')[0].value = 282.43;

            // Predictions:
            //loan status = fully paid
            //loss on investment = 0.0
            //document.getElementsByName('total_pymnt')[0].value = '8577.79';
            //document.getElementsByName('total_rec_prncp')[0].value = '8400.0';
            //document.getElementsByName('total_rec_int')[0].value = '177.79';

            loanQuantity.dispatchEvent(new Event('focusout'))
            console.log('Defaults filled');
        }

        var loanTerm;
        var loanQuantity;
        var intRate;
        var installment;
        function updateInstallment(){
            if (loanTerm === undefined| loanQuantity === undefined | intRate === undefined | installment === undefined){
                loanQuantity = document.getElementsByName('funded_amnt')[0];
                loanTerm = document.getElementsByName('term')[0];
                intRate = document.getElementsByName('int_rate')[0];
                installment = document.getElementsByName('installment')[0];

                loanQuantity.addEventListener("focusout", (event) => {installment.value = updateInstallment()});
                loanTerm.addEventListener("change", (event) => {installment.value = updateInstallment()});
                intRate.addEventListener("focusout", (event) => {installment.value = updateInstallment()});

                installment.value = updateInstallment()
                return;
            } 
            
            if (loanQuantity.value == "" || loanQuantity.value == 0){
                return ("No [Loan Amount] requested.");
            }

            if (loanTerm.value == 'Default'){
                return("No [Loan Term] ever input.")
            }

            if (intRate.value == "" || intRate.value == 0){
                return ("No [Interest Rate] ever input.");
            }

            var quant = loanQuantity.value;
            var term = parseInt(loanTerm.value);
            var rate = intRate.value;

            return ((quant / term) * (1.0 + rate/(36*60/term))).toFixed(2);
        }

        var status;
        var LoI;
        var alt1;
        var alt2;
        var clickable = true
        async function UpdateModel(){
            if (clickable == false){
                return;
            }
            clickable = false
            document.getElementsByName('loan_status')[0].value = '**PROCESSING**'


            var data = {
                'funded_amnt': document.getElementsByName('funded_amnt')[0].value,
                'term': document.getElementsByName('term')[0].value,
                'int_rate': document.getElementsByName('int_rate')[0].value,
                'sub_grade': document.getElementsByName('sub_grade')[0].value,
                'emp_length': document.getElementsByName('emp_length')[0].value,

                'home_ownership': document.getElementsByName('home_ownership')[0].value,
                'annual_inc': document.getElementsByName('annual_inc')[0].value,
                'issue_d': document.getElementsByName('issue_d')[0].value,
                'purpose': document.getElementsByName('purpose')[0].value,
                'zip_code': document.getElementsByName('zip_code')[0].value,

                'addr_state': document.getElementsByName('addr_state')[0].value,
                'dti': document.getElementsByName('dti')[0].value,
                'delinq_2yrs': document.getElementsByName('delinq_2yrs')[0].value,
                'earliest_cr_line': document.getElementsByName('earliest_cr_line')[0].value,
                'inq_last_6mths': document.getElementsByName('inq_last_6mths')[0].value,

                'mths_since_last_delinq': document.getElementsByName('mths_since_last_delinq')[0].value,
                'mths_since_last_record': document.getElementsByName('mths_since_last_record')[0].value,
                'open_acc': document.getElementsByName('open_acc')[0].value,
                'pub_rec': document.getElementsByName('pub_rec')[0].value,
                'last_pymnt_d': document.getElementsByName('last_pymnt_d')[0].value,

                'revol_bal': document.getElementsByName('revol_bal')[0].value,
                'revol_util': document.getElementsByName('revol_util')[0].value,
                'total_acc': document.getElementsByName('total_acc')[0].value,
                'initial_list_status': document.getElementsByName('initial_list_status')[0].value,
                'last_pymnt_amnt': document.getElementsByName('last_pymnt_amnt')[0].value,
                
                'next_pymnt_d': document.getElementsByName('next_pymnt_d')[0].value,
                'acc_now_delinq': document.getElementsByName('acc_now_delinq')[0].value,
                'tot_coll_amnt': document.getElementsByName('tot_coll_amnt')[0].value,
                'tot_cur_bal': document.getElementsByName('tot_cur_bal')[0].value,
                'total_rev_hi_lim': document.getElementsByName('total_rev_hi_lim')[0].value,

                'last_credit_pull_d': document.getElementsByName('last_credit_pull_d')[0].value,
                'collections_12_mths_ex_med': document.getElementsByName('collections_12_mths_ex_med')[0].value,
                'mths_since_last_major_derog': document.getElementsByName('mths_since_last_major_derog')[0].value,

                'has_delinq': document.getElementsByName('has_delinq')[0].checked,
                'has_record': document.getElementsByName('has_record')[0].checked,
                'has_last_pymnt_d': document.getElementsByName('has_last_pymnt_d')[0].checked,
                'has_next_pymnt_d': document.getElementsByName('has_next_pymnt_d')[0].checked,
                'has_derog': document.getElementsByName('has_derog')[0].checked,

                'verification_status': document.getElementsByName('verification_status')[0].value,
                'total_rec_late_fee': document.getElementsByName('total_rec_late_fee')[0].value,
                'installment': document.getElementsByName('installment')[0].value,
            }

            const response = await fetch(`${window.origin}/model`,{
                method: 'POST',
                body: JSON.stringify(data),
                headers: new Headers({
                    'content-type': 'application/json'
                })
            })

            const responseData = await response.json();
            document.getElementsByName('loan_status')[0].value = responseData.status;

            if (responseData.status == 'Invalid Input'){
            }
            else if (responseData.status == 'Fully Paid'){
                document.getElementsByName('loss_on_investment')[0].value = '';
                document.getElementsByName('alternate_1')[0].value = '';
                document.getElementsByName('alternate_2')[0].value = '';
            }
            else if (responseData.status == 'Defaulted'){
                document.getElementsByName('loss_on_investment')[0].value = responseData.loss;
                document.getElementsByName('alternate_1')[0].value = responseData.sugg1;
                document.getElementsByName('alternate_2')[0].value = responseData.sugg2;
            }


            clickable = true;
        }



        function EraseAll(){
            fields = document.querySelectorAll('input');
            for (object of fields){
                if (object.type == 'checkbox' && object.checked == true){
                    object.checked = false;
                    object.dispatchEvent(new Event('change'));
                    continue;
                }
                if (object.type == 'text'){
                    object.value = "";
                    continue;
                }
            }

            selects = document.querySelectorAll('select');
            for (object of selects){
                object.value = 'Default';
            }

            loanQuantity.dispatchEvent(new Event('focusout'))
        }


        function anyUpdater(){
            fields = document.querySelectorAll('input');
            for (object of fields){
                object.addEventListener('change',(event)=>{
                    document.getElementsByName('loan_status')[0].value = '**REQUIRES UPDATE**'
                })
            }

            selects = document.querySelectorAll('select');
            for (object of selects){
                object.addEventListener('change',(event)=>{
                    document.getElementsByName('loan_status')[0].value = '**REQUIRES UPDATE**'
                })
            }
        }



        var activeString;
        var bcksPress;
        var delPress;
        function updateMonthStructure(element){
            position = element.selectionStart;
            increasing = activeString.length < element.value.length;
            string = element.value.replace(/\-/g,"").replace(/\s/g,"");

            // Start from the end to not interrupt other indicies
            for (var i = string.length; i > 0 ; i-- ){
                // If our character isn't a number, remove it
                if (isNaN(string[i-1])){
                    string = string.slice(0,i-1) + string.slice(i)
                }
            }

            // If we are backspacing and all we killed was the -
            if (!increasing && activeString[position] == '-'){
                if (bcksPress) {
                    string = string.slice(0,3) + string.slice(4);
                    position -=1;
                }
                else if (delPress) {
                    string = string.slice(0,4) + string.slice(5);
                    position += 1;
                }
            }

            
            if (string.length > 4){
                string = string.slice(0,4) + '-' + string.slice(4)
            }

            // If no changes have been made to the string, don't change it, and don't change the cursor location
            if (string == activeString){
                element.value = string;
                element.selectionStart = position - 1;
                element.selectionEnd = element.selectionStart;
                return;
            }

            if (string.length > 7){
                element.value = activeString;
                element.selectionStart= position - 1;
                element.selectionEnd = element.selectionStart;
                return;
            }

            element.value = string;
            activeString = string;
            element.selectionStart = position;
            element.selectionEnd = position;

            
            if (increasing && string[ position - 1 ] == '-'){
                element.selectionStart +=1;
                element.selectionEnd = element.selectionStart;
            }
            else if (!increasing && string[position ] == '-'){
                element.selectionStart -=1;
                element.selectionEnd = element.selectionStart;
            }
        }

        function checkMonthStructure(string){
            // If we have a year with a single-digit month and no dash, improperly entered
            if (string.length == 5){
                string = string.slice(0,4) + "-0" + string.slice(-1);
            }

            // If we have a year with a 2 digit month and no dash OR a year with a dash and a single-digit month improperly entered
            if (string.length == 6){
                if (string[4] == '-')
                {
                    string = string.slice(0,5) + "0" + string.slice(-1);
                }
                else
                {
                    string = string.slice(0,4) + "-" + string.slice(-2);
                }
            }

            // If we are still not proplerly formatted, the first two steps failed to create a possible date
            string = string.match(/[0-9]{4}\-[0-9]{2}/)
            if (string === null) { return ""; }

            // Check valid year
            //currYear = new Date().getFullYear();
            //year = parseInt(string[0].slice(0,4));
            //if (year < currYear) { return ""; }

            // Check valid month
            months = ["01","02","03","04","05","06","07","08","09","10","11","12"]
            month = string[0].slice(-2);
            if (!months.includes(month)) { return ""; }

            // Check inputted month is after the current month
            //if (year == currYear && (parseInt(month) < new Date().getMonth() + 1)) { return ""; }

            return string[0];
        }


        window.onload = () => {
            document.getElementsByName('has_delinq')[0].onchange = () => {
                var element = document.getElementsByName('mths_since_last_delinq')[0].closest("span");
                changeHide(document.getElementsByName('has_delinq')[0], element);
            }          

            document.getElementsByName('has_record')[0].onchange = () => {
                var element = document.getElementsByName('mths_since_last_record')[0].closest("span");
                changeHide(document.getElementsByName('has_record')[0], element);
            }

            document.getElementsByName('has_last_pymnt_d')[0].onchange = () => {
                var element = document.getElementsByName('last_pymnt_d')[0].closest("span");
                changeHide(document.getElementsByName('has_last_pymnt_d')[0], element);

                var element = document.getElementsByName('last_pymnt_amnt')[0].closest("span");
                changeHide(document.getElementsByName('has_last_pymnt_d')[0], element);
            }

            document.getElementsByName('has_next_pymnt_d')[0].onchange = () => {
                var element = document.getElementsByName('next_pymnt_d')[0].closest("span");
                changeHide(document.getElementsByName('has_next_pymnt_d')[0], element);

            }

            document.getElementsByName('has_derog')[0].onchange = () => {
                var element = document.getElementsByName('mths_since_last_major_derog')[0].closest("span");
                changeHide(document.getElementsByName('has_derog')[0], element);
            }

            document.addEventListener("keydown", event => { 
                if (event.code === "Backspace") { 
                    bcksPress = true; 
                } 
                if (event.code === "Delete") {
                    delPress = true;
                }
            }); 

            document.addEventListener("keyup", event => { 
                if (event.code === "Backspace") { 
                    bcksPress = false; 
                } 
                if (event.code === "Delete") {
                    delPress = false;
                }
            }); 
            resetChecks();
            
            updateInstallment();
            anyUpdater();
            
            EraseAll();
        }
    </script>
    
</head>
<body>



    <h1>Loan Plausibility</h1>
    <p>In order to determine whether this applicant should receive the full loan amount requested, please fill in this information:</p>
    <div class = "row">
        <div class = "column">
            <div class = heading>
                <h2> User Variables </h2>
            </div>

            <form>
                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="funded_amnt"> Requested Loan Amount: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "funded_amnt" placeholder = "Input a number" oninput="value = numbers2d(this.value)" onfocusout = "value= format2d(this.value)">
                        </div>
                    </div>

                </span>
                
                <span style = "white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "term"> Intended Repayment Duration: </label>
                        </div>
                        <div class = "column2">
                            <select name = "term">
                                <option disabled selected value="Default"> Intended Repayment Duration </option>
                                <option value = "36 Months"> 36 Months </option>
                                <option value = "60 Months"> 60 Months </option>
                            </select>
                        </div>
                    </div>
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "int_rate"> Interest Rate: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "int_rate" placeholder = "Format: ##.## (%)"  oninput="value = numbers2d(this.value)" onfocusout = "value= format2d(this.value)">
                        </div>
                    </div>
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "emp_length"> Length of Employment: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "emp_length" placeholder = "Input a number" oninput="value = onlywholenumbers(this.value)">
                        </div>
                    </div>                    
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "home_ownership"> Home Ownership Status: </label>
                        </div>
                        <div class = "column2">
                            <select name = "home_ownership">
                                <option disabled selected value = "Default"> Home Ownership Status</option>
                                <option value = "NONE"> None </option>
                                <option value = "RENT"> Rent </option>
                                <option value = "OWN"> Own </option>
                                <option value = "MORTGAGE"> Mortgage </option>
                                <option value = "OTHER"> Other </option>
                            </select>
                        </div>
                    </div>    
                </span>

                <span style = "white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "annual_inc"> Annual Income: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "annual_inc" placeholder = "Input a number"  oninput="value = numbers2d(this.value)" onfocusout = "value= format2d(this.value)">
                        </div>
                    </div>    
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "issue_d"> Desired Approval Month: </label>
                        </div>
                        <div class = "column2">
                            <input type = "month" name = "issue_d" placeholder= "Format: YYYY-MM" onfocus = "activeString = value" oninput = "updateMonthStructure(this)" onfocusout = "value = checkMonthStructure(this.value)">
                        </div>
                    </div>   
                </span>

                
                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "purpose"> Purpose of Loan: </label>
                        </div>
                        <div class = "column2">
                            <select name = "purpose">
                                <option disabled selected value = "Default"> Reason for Requested Loan </option>
        
                                <option value = "house"> House </option>
                                <option value = "car"> Car </option>
                                <option value = "major_purchase"> Major Purchase </option>
                                <option value = "medical"> Medical Expense </option>
                                <option value = "educational"> Educational Expense </option>
                                
                                <option disabled> ----- </option>
        
                                <option value = "credit_card"> Credit Card</option>
                                <option value = "home_improvement"> Home Improvement </option>
                                <option value = "small_business"> Small Business </option>
                                <option value = "moving"> Moving </option>
                                <option value = "vacation"> Vacation </option>
        
                                <option disabled> ----- </option>
        
                                <option value = "wedding"> Wedding </option>
                                <option value = "renewable_energy"> Renewable Energy </option>
                                <option value = "debt_consolidation"> Debt Consolidation </option>
                                <option value = "other"> Other </option>
                            </select>
                        </div>
                    </div>   
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "zip_code"> Zip Code: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "zip_code" placeholder= "#####" maxlength = "5" oninput = "value = onlywholenumbers(this.value)" onfocusout = "value = checkLen(this.value, 5)">
                        </div>
                    </div>   
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "addr_state"> State: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "addr_state" placeholder= "State Initials" maxlength = "2" onfocusout = "value = checkStateInitial(this.value)">
                        </div>
                    </div>   
                </span>
            </form>
            
        </div>

        <div class = "column">
            <div class = "heading">
                <h2> Bank-Engineered Variables </h2>
            </div>

            <form>
                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="sub_grade"> Loan SubGrade: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "sub_grade" placeholder = "Format: A1 -> G5" onfocusout = "value = checkGradeStructure(this.value)">
                        </div>
                    </div>   
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "verification_status"> Verification Status: </label>
                        </div>
                        <div class = "column2">
                            <select name = "verification_status">
                                <option disabled selected value = "Default"> Verification Status </option>
                                <option value = "Not Verified"> Not Verified </option>
                                <option value = "Source Verified"> Source Verified </option>
                                <option value = "Verified"> Verified </option>
                            </select>
                        </div>
                    </div>    
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="dti"> Debt-To-Income Ratio: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "dti" placeholder = "Input a number" oninput="value = numbers2d(this.value)" onfocusout = "value= format2d(this.value)">
                        </div>
                    </div>   
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="delinq_2yrs"> Delinquencies in the Last 2 years: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "delinq_2yrs" placeholder = "Input a number" oninput="value = onlywholenumbers(this.value)">
                        </div>
                    </div>   
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="earliest_cr_line"> Earliest Credit Line: </label>
                        </div>
                        <div class = "column2">
                            <input type = "month" name = "earliest_cr_line" placeholder = "Format: YYYY-MM" onfocus = "activeString = value" oninput = "updateMonthStructure(this)" onfocusout = "value = checkMonthStructure(this.value)">
                        </div>
                    </div>   
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="inq_last_6mths"> Number of Account Inquiries in the last 6 months: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "inq_last_6mths" placeholder = "Input a number" oninput = "value = onlywholenumbers(this.value)">
                        </div>
                    </div>                      
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label class = "checkbox" for = "has_delinq"> Has any History of Delinquencies: </label>
                        </div>
                        <div class = "column2">
                            <input type = "checkbox" name = "has_delinq">
                        </div>
                    </div>  
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="mths_since_last_delinq"> Months Since Last Delinquency: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "mths_since_last_delinq" placeholder = "Input a number" oninput = "value = onlywholenumbers(this.value)">
                        </div>
                        
                    <p> ----- </p>
                    <br>

                    </div>  






                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label class = "checkbox" for = "has_record"> Has any Records: </label>
                        </div>
                        <div class = "column2">
                            <input type = "checkbox" name = "has_record">
                        </div>
                    </div>  
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="mths_since_last_record"> Months Since Last Record: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "mths_since_last_record" placeholder = "Input a number" oninput = "value = onlywholenumbers(this.value)">
                        </div>

                        <p> ----- </p>
                        <br>
                    </div>  




                    
                    

                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "open_acc"> Number of Open Accounts: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "open_acc" placeholder = "Input a number" oninput = "value = onlywholenumbers(this.value)">
                        </div>
                    </div>  
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "pub_rec"> Number of Public Records: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "pub_rec" placeholder = "Input a number" oninput = "value = onlywholenumbers(this.value)">
                        </div>
                    </div>  
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "revol_bal"> Amount of Revolving Balance Credit: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "revol_bal" placeholder = "Input a number" oninput="value = numbers2d(this.value)" onfocusout = "value= format2d(this.value)">
                        </div>
                    </div>  
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "revol_util"> Percentage of Revolving Credit Balance Used: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "revol_util" placeholder = "Format: ##.## (%)"  oninput="value = numbers2d(this.value)" onfocusout = "value= format2d(this.value)">
                        </div>
                    </div>  
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "total_acc"> Number of Total Bank Accounts: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "total_acc" placeholder = "Input a number" oninput = "value = onlywholenumbers(this.value)">
                        </div>
                    </div>  
                </span>

                <span style = "white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for = "initial_list_status"> Initial Listing Status: </label>
                        </div>
                        <div class = "column2">
                            <select name = "initial_list_status">
                                <option disabled selected value = "Default"> Listing Status </option>
                                <option value = "f"> F </option>
                                <option value = "w"> W </option>
                            </select>
                        </div>
                    </div>  
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label class = "checkbox" for = "has_last_pymnt_d"> Has a Last Payment Date: </label>
                        </div>
                        <div class = "column2">
                            <input type = "checkbox" name = "has_last_pymnt_d">
                        </div>
                    </div>  
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="last_pymnt_d"> Last Payment Date: </label>
                        </div>
                        <div class = "column2">
                            <input type = "month" name = "last_pymnt_d" placeholder = "Format: YYYY-MM" onfocus = "activeString = value" oninput = "updateMonthStructure(this)" onfocusout = "value = checkMonthStructure(this.value)">
                        </div>
                    </div>  
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="last_pymnt_amnt"> Last Payment Amount: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "last_pymnt_amnt" placeholder = "Insert a number"  oninput="value = numbers2d(this.value)" onfocusout = "value= format2d(this.value)">
                        </div>

                        <p> ----- </p>
                        <br>
                    </div>  
                </span>
                
                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label class = "checkbox" for = "has_next_pymnt_d"> Has a Next Payment Date: </label>
                        </div>
                        <div class = "column2">
                            <input type = "checkbox" name = "has_next_pymnt_d">
                        </div>
                    </div>  
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="next_pymnt_d"> Next Payment Date: </label>
                        </div>
                        <div class = "column2">
                            <input type = "month" name = "next_pymnt_d" placeholder = "Format: YYYY-MM" onfocus = "activeString = value" oninput = "updateMonthStructure(this)" onfocusout = "value = checkMonthStructure(this.value)">
                        </div>
                        <p> ----- </p>
                        <br>
                    </div>  
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="last_credit_pull_d"> Last Date Credit was Pulled: </label>
                        </div>
                        <div class = "column2">
                            <input type = "month" name = "last_credit_pull_d" placeholder = "Format: YYYY-MM" onfocus = "activeString = value" oninput = "updateMonthStructure(this)" onfocusout = "value = checkMonthStructure(this.value)">
                        </div>
                    </div>  
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="collections_12_mths_ex_med"> Number of Non-Medical Collections in the Last Year: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "collections_12_mths_ex_med" placeholder = "Insert a number"  oninput = "value = onlywholenumbers(this.value)">
                        </div>
                    </div>  
                </span>

                <span style = "white-space: wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label class = "checkbox"for = "has_derog"> Has a Major Derogative: </label>
                        </div>
                        <div class = "column2">
                            <input type = "checkbox" name = "has_derog">
                        </div>
                    </div>  
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="mths_since_last_major_derog"> Months Since Last Major Derogative: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "mths_since_last_major_derog" placeholder = "Insert a number" oninput = "value = onlywholenumbers(this.value)">
                        </div>

                        <p> ----- </p>
                        <br>
                    </div>  
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="acc_now_delinq"> Number of Delinquent Accounts: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "acc_now_delinq" placeholder = "Insert a number" oninput = "value = onlywholenumbers(this.value)">
                        </div>
                    </div>  
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="tot_coll_amnt"> Total Amount Received via Collections: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "tot_coll_amnt" placeholder = "Insert a number" oninput="value = numbers2d(this.value)" onfocusout = "value= format2d(this.value)">
                        </div>
                    </div>  
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="total_rec_late_fee"> Total Late Fees Paid by User: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "total_rec_late_fee" placeholder = "Insert a number" oninput="value = numbers2d(this.value)" onfocusout = "value= format2d(this.value)">
                        </div>
                    </div>  
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="tot_cur_bal"> Total Current Balance (Across All Accounts): </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "tot_cur_bal" placeholder = "Insert a number" oninput="value = numbers2d(this.value)" onfocusout = "value= format2d(this.value)">
                        </div>
                    </div>  
                </span>

                <span style="white-space:wrap">
                    <div class = "innerrow">
                        <div class = "column1">
                            <label for="total_rev_hi_lim"> Total Revolving Upper Credit Limit: </label>
                        </div>
                        <div class = "column2">
                            <input type = "text" name = "total_rev_hi_lim" placeholder = "Insert a number" oninput="value = numbers2d(this.value)" onfocusout = "value= format2d(this.value)">
                        </div>
                    </div>  
                </span>
            </form>
        </div>

        <div class = "column">
            <div class = "heading">
                <h2> Anticipated Outcomes </h2>
            </div>

            <span style="white-space:wrap">
                <div class = "innerrow">
                    <div class = "column1">
                        <label for="installment"> Installment: </label>
                    </div>
                    <div class = "column2">
                        <input type = "text" name = "installment" readonly>
                    </div>
                </div>   
            </span>

            <span style="white-space:wrap">
                <div class = "innerrow">
                    <div class = "column1">
                        <label for="loan_status"> Predicted Loan Status: </label>
                    </div>
                    <div class = "column2">
                        <input type = "text" name = "loan_status" readonly>
                    </div>
                </div>   
            </span>

            <span style="white-space:wrap">
                <div class = "innerrow">
                    <div class = "column1">
                        <label for="loss_on_investment"> Expected Loss On Investment: </label>
                    </div>
                    <div class = "column2">
                        <input type = "text" name = "loss_on_investment" readonly>
                    </div>
                </div>   
            </span>

            <span style="white-space:wrap">
                <div class = "innerrow">
                    <div class = "column1">
                        <label for="alternate_1"> Suggested Alternate Quantity (Method 1): </label>
                    </div>
                    <div class = "column2">
                        <input type = "text" name = "alternate_1" readonly>
                    </div>
                </div>   
            </span>
            
            <span style="white-space:wrap">
                <div class = "innerrow">
                    <div class = "column1">
                        <label for="alternate_2"> Suggested Alternate Quantity (Method 2): </label>
                    </div>
                    <div class = "column2">
                        <input type = "text" name = "alternate_2" readonly>
                    </div>
                </div>   
            </span>



        </div>
    </div>

</body>


<footer>
    <p>Debug Menu</p>

    <button onclick="FillDefaults()"> Example Values</button>
    <button onclick="EraseAll()"> Clear </button>
    <button onclick="UpdateModel()"> Submit </button>
</footer>

</html>